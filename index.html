<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Learner Pro - A/L Edition</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --card: #161616;
            --primary: #3498db;
            --success: #2ecc71;
            --error: #e74c3c;
            --text: #ffffff;
            --text-dim: #b0b0b0;
            --opt-bg: #222222;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 850px; }
        .step { display: none; background: var(--card); padding: 35px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.6); }
        .active { display: block; }

        .btn-row { display: flex; gap: 15px; margin-top: 30px; }
        .btn-next { background: var(--primary); color: white; border: none; padding: 14px 30px; border-radius: 12px; cursor: pointer; flex: 2; font-weight: bold; font-size: 16px; transition: 0.3s; }
        .btn-next:hover { filter: brightness(1.2); }
        .btn-back { background: #444; color: white; border: none; padding: 14px 30px; border-radius: 12px; cursor: pointer; flex: 1; font-weight: bold; }

        .option-card { background: #222; border: 2px solid #333; padding: 20px; margin: 12px 0; border-radius: 12px; cursor: pointer; transition: 0.3s; }
        .option-card:hover { border-color: var(--primary); background: #282828; }
        input, select { width: 100%; padding: 15px; border-radius: 10px; border: 1px solid #444; background: #222; color: white; font-size: 16px; margin-top: 15px; }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .progress-bar { flex-grow: 1; height: 8px; background: #333; margin: 0 20px; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: 0.5s; }
        
        .score-pill { padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 0.9em; margin-left: 8px; }
        .s-wrong { background: rgba(231, 76, 60, 0.2); color: var(--error); border: 1px solid var(--error); }
        .s-right { background: rgba(46, 204, 113, 0.2); color: var(--success); border: 1px solid var(--success); }

        .q-text { font-size: 1.3em; margin-bottom: 30px; line-height: 1.6; }
        .mcq-opt { background: var(--opt-bg); padding: 18px; border-radius: 12px; cursor: pointer; margin-bottom: 15px; border: 2px solid transparent; transition: 0.2s; }
        .correct-final { border-color: var(--success) !important; background: rgba(46, 204, 113, 0.1) !important; }
        .wrong-final { border-color: var(--error) !important; background: rgba(231, 76, 60, 0.1) !important; }

        .exp-text { font-size: 0.9em; color: var(--text-dim); margin-top: 8px; padding-top: 8px; border-top: 1px solid #333; }
        .hint-section { background: #2b2b10; padding: 15px; border-radius: 10px; border-left: 4px solid #f1c40f; margin: 20px 0; display: none; }
        
        #historyList div { border-bottom: 1px solid #333; padding: 8px 0; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<div class="container">
    <div id="step1" class="step active">
        <h2>‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 1: ‡∑Ä‡∑í‡∑Ç‡∂∫ ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±</h2>
        <div class="option-card" onclick="setSubject('chemistry')">‡∂ª‡∑É‡∑è‡∂∫‡∂± ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä (Chemistry)</div>
        <div class="option-card" onclick="setSubject('physics')">‡∂∑‡∑û‡∂≠‡∑í‡∂ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä (Physics)</div>
        <div class="option-card" onclick="setSubject('biology')">‡∂¢‡∑ì‡∑Ä ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä (Biology)</div>
        <div class="option-card" onclick="setSubject('combinedmaths')">‡∑É‡∂Ç‡∂∫‡∑î‡∂ö‡∑ä‡∂≠ ‡∂ú‡∂´‡∑í‡∂≠‡∂∫ (Maths)</div>
        <div class="option-card" onclick="setSubject('econ')">‡∂Ü‡∂ª‡∑ä‡∂Æ‡∑í‡∂ö ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä (Econ)</div>
    </div>

    <div id="step2" class="step">
        <h2>‡∂¥‡∑í‡∂∫‡∑Ä‡∂ª 2: ‡∂ö‡∑è‡∂Ω ‡∂ª‡∑è‡∂∏‡∑î‡∑Ä</h2>
        <p>‡∑Ä‡∑í‡∂∑‡∑è‡∂ú‡∂∫‡∂ß ‡∂≠‡∑Ä ‡∂Ø‡∑í‡∂± ‡∂ö‡∑ì‡∂∫‡∂ö‡∑ä ‡∂â‡∂≠‡∑í‡∂ª‡∑í‡∑Ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø?</p>
        <input type="number" id="daysInput" placeholder="‡∂ã‡∂Ø‡∑è: 100">
        <div class="btn-row">
            <button class="btn-back" onclick="goToStep(1)">Back</button>
            <button class="btn-next" onclick="showPlanner()">Next</button>
        </div>
    </div>

    <div id="step3" class="step">
        <h2>‡∂î‡∂∂‡∑ö ‡∂â‡∂Ω‡∂ö‡∑ä‡∂ö‡∂∫</h2>
        <div id="plannerResult" style="text-align:center; font-size: 1.3em; padding: 30px; border: 1px dashed var(--primary); border-radius: 15px;"></div>
        <div class="btn-row">
            <button class="btn-back" onclick="goToStep(2)">‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∂ª‡∂´‡∂∫</button>
            <button class="btn-next" onclick="startQuiz()">MCQ ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        </div>
    </div>

    <div id="quizStep" class="step">
        <div class="header">
            <span id="qInfo" style="color: var(--text-dim);">1 / 25</span>
            <div class="progress-bar"><div class="progress-fill" id="pFill"></div></div>
            <div style="display:flex;">
                <div class="score-pill s-wrong">‚úï <span id="wScore">0</span></div>
                <div class="score-pill s-right">‚úì <span id="rScore">0</span></div>
            </div>
        </div>
        <div id="qDisplay" class="q-text"></div>
        <div id="optionsDisplay"></div>
        <div id="hintBox" class="hint-section"></div>
        <div class="btn-row">
            <button onclick="toggleHint()" style="background:none; border:none; color:var(--primary); cursor:pointer; font-weight:bold;">Hint üí°</button>
            <button id="doneBtn" class="btn-next" style="display:none;" onclick="nextQuestion()">‡∂∏‡∑ì‡∑Ö‡∂ü ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫</button>
        </div>
    </div>

    <div id="resultStep" class="step">
        <h2 style="text-align:center;">‡∑Ä‡∑í‡∂∑‡∑è‡∂ú ‡∑Ä‡∑è‡∂ª‡∑ä‡∂≠‡∑è‡∑Ä</h2>
        <div style="text-align:center; padding: 20px;">
            <div id="scoreCircle" style="font-size: 4em; font-weight: bold; color: var(--success);">0%</div>
            <p id="gradeText" style="font-size: 1.5em; font-weight: bold; margin: 10px 0;"></p>
            <p id="feedbackMessage" style="color: var(--text-dim); line-height: 1.6;"></p>
            
            <div style="margin-top: 30px; background: #222; padding: 20px; border-radius: 15px; text-align: left;">
                <h3 style="font-size: 1em; color: var(--primary); margin-top: 0;">‡∂¥‡∑ô‡∂ª ‡∂Ø‡∂≠‡∑ä‡∂≠ (Progress History)</h3>
                <div id="historyList"></div>
            </div>
        </div>
        <button class="btn-next" style="width:100%" onclick="goToStep(1)">‡∂∏‡∑î‡∂Ω‡∂ß ‡∂∫‡∂±‡∑ä‡∂±</button>
    </div>
</div>

<script>
    const questionsDB = {
        "chemistry": [
            { q: "1. ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∑É‡∑ò‡∂´‡∂≠‡∑è‡∑Ä ‡∑Ä‡∑ê‡∂©‡∑í‡∂∏ ‡∂∏‡∑ñ‡∂Ω‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‚Äç‡∂∫‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", o: ["N", "O", "F", "Cl"], c: 2, h: "‡∂Ü‡∑Ä‡∂ª‡∑ä‡∂≠‡∑í‡∂≠‡∑è ‡∑Ä‡∂ú‡∑î‡∑Ä‡∑ö ‡∂Ø‡∂ö‡∑î‡∂´‡∂ß ‡∑Ñ‡∑è ‡∂â‡∑Ñ‡∑Ö‡∂ß ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä ‡∑É‡∑ò‡∂´‡∂≠‡∑è‡∑Ä ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑ö.", exps: ["N = 3.0", "O = 3.5", "F (4.0) ‡∑Ä‡∑ê‡∂©‡∑í‡∂∏ ‡∂Ö‡∂ú‡∂∫‡∂∫‡∑í.", "Cl ‡∑Ä‡∂Ω ‡∂Ö‡∂ú‡∂∫ F ‡∂ß ‡∑Ä‡∂©‡∑è ‡∂Ö‡∂©‡∑î‡∂∫."] },
            { q: "2. ‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä ‡∂Ö‡∑Ä‡∑É‡∑ä‡∂Æ‡∑è‡∑Ä‡∑ö ‡∂¥‡∑Ä‡∂≠‡∑í‡∂± ‡∂Ö‡∂Ω‡∑ù‡∑Ñ‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", o: ["P", "S", "Br", "I"], c: 2, h: "‡∂∏‡∑ô‡∂∫ ‡∂ö‡∑è‡∂´‡∑ä‡∂©‡∂∫ 17 ‡∂ß ‡∂Ö‡∂∫‡∂≠‡∑ä ‡∂∏‡∑ñ‡∂Ω‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‚Äç‡∂∫‡∂∫‡∂ö‡∑í.", exps: ["‡∂ù‡∂±‡∂∫‡∂ö‡∑í", "‡∂ù‡∂±‡∂∫‡∂ö‡∑í", "Br ‡∂∫‡∂±‡∑î ‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä ‡∂Ö‡∑Ä‡∑É‡∑ä‡∂Æ‡∑è‡∑Ä‡∑ö ‡∂¥‡∑Ä‡∂≠‡∑í‡∂± ‡∂ë‡∂ö‡∂∏ ‡∂Ö‡∂Ω‡∑ù‡∑Ñ‡∂∫‡∂∫‡∑í.", "‡∂ù‡∂±‡∂∫‡∂ö‡∑í"] },
            { q: "3. pH ‡∂Ö‡∂ú‡∂∫ 7 ‡∂ß ‡∑Ä‡∂©‡∑è ‡∂Ö‡∂©‡∑î ‡∂Ø‡∑ä‚Äç‡∂ª‡∑è‡∑Ä‡∂´‡∂∫‡∂ö‡∑ä?", o: ["‡∂∑‡∑è‡∑Ç‡∑ä‡∂∏‡∑í‡∂ö", "‡∂ã‡∂Ø‡∑è‡∑É‡∑ì‡∂±", "‡∂Ü‡∂∏‡∑ä‡∂Ω‡∑í‡∂ö", "‡∑É‡∂Ç‡∂ª‡∂ö‡∑ä‡∑Ç‡∂ö"], c: 2, h: "pH 0-7 ‡∂¥‡∂ª‡∑è‡∑É‡∂∫ ‡∑É‡∂Ω‡∂ö‡∂±‡∑ä‡∂±.", exps: ["pH > 7", "pH = 7", "pH < 7 ‡∂Ü‡∂∏‡∑ä‡∂Ω‡∑í‡∂ö ‡∑Ä‡∑ö.", "pH ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä‡∑Ä‡∑ì‡∂∏‡∑ä ‡∂¥‡∑è‡∂Ω‡∂±‡∂∫ ‡∂ö‡∂ª‡∂∫‡∑í."] },
            { q: "4. CH4 ‡∂Ö‡∂´‡∑î‡∑Ä‡∑ö ‡∑Ñ‡∑ê‡∂©‡∂∫ ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", o: ["‡∂≠‡∂Ω ‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ù‡∂´‡∑è‡∂ö‡∑è‡∂ª", "‡∂†‡∂≠‡∑î‡∑É‡∑ä‡∂≠‡∂Ω‡∑ì‡∂∫", "‡∂¥‡∑í‡∂ª‡∂∏‡∑í‡∂©‡∑ì‡∂∫", "‡∂ª‡∑ö‡∂õ‡∑ì‡∂∫"], c: 1, h: "‡∂ö‡∑è‡∂∂‡∂±‡∑ä ‡∑Ä‡∂ß‡∑è ‡∂∂‡∂±‡∑ä‡∂∞‡∂± ‡∂∫‡∑î‡∂ú‡∂Ω 4‡∂ö‡∑ä ‡∂á‡∂≠.", exps: ["BF3", "CH4 ‡∂¥‡∂ª‡∑í‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂†‡∂≠‡∑î‡∑É‡∑ä‡∂≠‡∂Ω‡∑ì‡∂∫ ‡∑Ä‡∑ö.", "NH3", "CO2"] },
            { q: "5. PV = nRT ‡∑Ñ‡∑í n ‡∂∫‡∂±‡∑î?", o: ["‡∂¥‡∑ì‡∂©‡∂±‡∂∫", "‡∂¥‡∂ª‡∑í‡∂∏‡∑è‡∑Ä", "‡∂∏‡∑Ä‡∑î‡∂Ω ‡∂ú‡∂´‡∂±", "‡∂ã‡∑Ç‡∑ä‡∂´‡∂≠‡∑ä‡∑Ä‡∂∫"], c: 2, h: "Gas ‡∂∏‡∑Ä‡∑î‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫.", exps: ["P", "V", "n ‡∂∫‡∂±‡∑î ‡∂∏‡∑Ä‡∑î‡∂Ω ‡∂ú‡∂´‡∂±‡∂∫‡∑í.", "T"] }
        ],
        "physics": [
            { q: "1. ‡∂∂‡∂Ω‡∂∫‡∑ö (Force) SI ‡∂í‡∂ö‡∂ö‡∂∫?", o: ["J", "W", "N", "Pa"], c: 2, h: "F=ma", exps: ["‡∑Å‡∂ö‡∑ä‡∂≠‡∑í‡∂∫", "‡∂ö‡∑ä‡∑Ç‡∂∏‡∂≠‡∑è‡∑Ä", "‡∂∂‡∂Ω‡∂∫ ‡∂∏‡∂±‡∑í‡∂±‡∑ä‡∂±‡∑ö ‡∂±‡∑í‡∑Ä‡∑ä‡∂ß‡∂±‡∑ä ‡∑Ä‡∂Ω‡∑í‡∂±‡∑ä.", "‡∂¥‡∑ì‡∂©‡∂±‡∂∫"] },
            { q: "2. ‡∂Ü‡∂Ω‡∑ù‡∂ö‡∂∫‡∑ö ‡∑Ä‡∑ö‡∂ú‡∂∫ ‡∂ã‡∂¥‡∂ª‡∑í‡∂∏ ‡∑Ä‡∂±‡∑ä‡∂±‡∑ö?", o: ["‡∂¢‡∂Ω‡∂∫", "‡∑Ä‡∑ì‡∂Ø‡∑î‡∂ª‡∑î", "‡∂ª‡∑í‡∂ö‡∑ä‡∂≠‡∂∫", "‡∑Ä‡∑è‡∂≠‡∂∫"], c: 2, h: "‡∂∂‡∑è‡∂∞‡∂ö ‡∂Ö‡∑Ä‡∂∏ ‡∂≠‡∑ê‡∂±.", exps: ["‡∑Ä‡∑ö‡∂ú‡∂∫ ‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ö", "‡∑Ä‡∑ö‡∂ú‡∂∫ ‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ö", "‡∂ª‡∑í‡∂ö‡∑ä‡∂≠‡∂∫ ‡∂≠‡∑î‡∑Ö ‡∂ã‡∂¥‡∂ª‡∑í‡∂∏ ‡∑Ä‡∑ö.", "‡∂ª‡∑í‡∂ö‡∑ä‡∂≠‡∂∫‡∂ß ‡∑Ä‡∂©‡∑è ‡∂∏‡∂≥‡∂ö‡∑ä ‡∂Ö‡∂©‡∑î‡∂∫"] },
            { q: "3. g ‡∑Ñ‡∑í ‡∑É‡∂∏‡∑ä‡∂∏‡∂≠ ‡∂Ö‡∂ú‡∂∫?", o: ["9.8", "10", "8.9", "11"], c: 0, h: "‡∂¥‡∑ò‡∂Æ‡∑í‡∑Ä‡∑í ‡∂ú‡∑î‡∂ª‡∑î‡∂≠‡∑ä‡∑Ä‡∂∫.", exps: ["9.8 ms‚Åª¬≤ ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫.", "‡∂Ü‡∑É‡∂±‡∑ä‡∂± ‡∂Ö‡∂ú‡∂∫‡∂ö‡∑í.", "‡∑É‡∑í‡∂ö‡∑î‡∂ª‡∑î ‡∂ú‡∑ä‚Äç‡∂ª‡∑Ñ‡∂∫‡∑è‡∂ú‡∑ö ‡∂Ö‡∂ú‡∂∫‡∂ö‡∑í.", "‡∑Ä‡∑ê‡∂©‡∑í ‡∂Ö‡∂ú‡∂∫‡∂ö‡∑í"] },
            { q: "4. ‡∂¥‡∂ª‡∑í‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂Ö‡∂∏‡∑ä‡∂∏‡∑ì‡∂ß‡∂ª‡∂∫‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂ª‡∑ù‡∂∞‡∂∫?", o: ["‡∂â‡∂≠‡∑è ‡∑Ä‡∑ê‡∂©‡∑í", "‡∑Å‡∑î‡∂±‡∑ä‚Äç‡∂∫", "100 Ohm", "‡∂Ö‡∂±‡∂±‡∑ä‡∂≠"], c: 1, h: "‡∂∞‡∑è‡∂ª‡∑è‡∑Ä‡∂ß ‡∂∂‡∑è‡∂∞‡∑è ‡∂±‡∑ú‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.", exps: ["‡∂∞‡∑è‡∂ª‡∑è‡∑Ä ‡∂±‡∂≠‡∂ª ‡∑Ä‡∑ö", "‡∂¥‡∂ª‡∑í‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂Ö‡∂∏‡∑ä‡∂∏‡∑ì‡∂ß‡∂ª‡∂∫‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂ª‡∑ù‡∂∞‡∂∫ ‡∑Å‡∑î‡∂±‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "‡∂∞‡∑è‡∂ª‡∑è‡∑Ä ‡∂ú‡∂Ω‡∑è ‡∂±‡∑ú‡∂∫‡∂∫‡∑í"] },
            { q: "5. ‡∑Å‡∂ö‡∑ä‡∂≠‡∑í‡∂∫ ‡∂∏‡∑ê‡∑Ä‡∑í‡∂∫ ‡∂±‡∑ú‡∑Ñ‡∑ê‡∂ö‡∑í ‡∂∂‡∑Ä ‡∂¥‡∑Ä‡∑É‡∂±‡∑ä‡∂±‡∑ö?", o: ["‡∂±‡∑í‡∑Ä‡∑ä‡∂ß‡∂±‡∑ä ‡∂±‡∑í‡∂∫‡∂∏", "‡∑Å‡∂ö‡∑ä‡∂≠‡∑í ‡∑É‡∂Ç‡∑É‡∑ä‡∂Æ‡∑í‡∂≠‡∑í ‡∂±‡∑í‡∂∫‡∂∏‡∂∫", "‡∂¥‡∑ê‡∑É‡∑ä‡∂ö‡∂Ω‡∑ä ‡∂±‡∑í‡∂∫‡∂∏", "‡∂ï‡∂∏‡∑ä ‡∂±‡∑í‡∂∫‡∂∏"], c: 1, h: "Energy conservation", exps: ["‡∂†‡∂Ω‡∑í‡∂≠‡∂∫ ‡∂ú‡∑ê‡∂±", "‡∑Å‡∂ö‡∑ä‡∂≠‡∑í ‡∑É‡∂Ç‡∑É‡∑ä‡∂Æ‡∑í‡∂≠‡∑í ‡∂±‡∑í‡∂∫‡∂∏‡∂∫ ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫.", "‡∂¥‡∑ì‡∂©‡∂±‡∂∫ ‡∂ú‡∑ê‡∂±", "‡∑Ä‡∑í‡∂Ø‡∑î‡∂Ω‡∑í‡∂∫ ‡∂ú‡∑ê‡∂±"] }
        ],
        "biology": [
            { q: "1. ‡∑É‡∑õ‡∂Ω‡∂∫‡∑ö ‡∑Å‡∂ö‡∑ä‡∂≠‡∑í ‡∂¥‡∑ä‚Äç‡∂ª‡∂∑‡∑Ä‡∂∫?", o: ["‡∂±‡∑ä‚Äç‡∂∫‡∑Ç‡∑ä‡∂ß‡∑í‡∂∫", "‡∂ª‡∂∫‡∑í‡∂∂‡∑ú‡∑É‡∑ù‡∂∏", "‡∂∏‡∂∫‡∑í‡∂ß‡∑ú‡∂ö‡∑ú‡∂±‡∑ä‡∂©‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è", "‡∂ú‡∑ú‡∂Ω‡∑ä‡∂ú‡∑í"], c: 2, h: "ATP ‡∂±‡∑í‡∂¥‡∂Ø‡∑Ä‡∂± ‡∂≠‡∑ê‡∂±.", exps: ["‡∂¥‡∑è‡∂Ω‡∂±‡∂∫", "‡∂¥‡∑ä‚Äç‡∂ª‡∑ù‡∂ß‡∑ì‡∂±", "‡∂∏‡∂∫‡∑í‡∂ß‡∑ú‡∂ö‡∑ú‡∂±‡∑ä‡∂©‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è ‡∑Å‡∂ö‡∑ä‡∂≠‡∑í‡∂∫ ‡∂±‡∑í‡∂¥‡∂Ø‡∑Ä‡∂∫‡∑í.", "‡∑Å‡∑ä‚Äç‡∂ª‡∑è‡∑Ä‡∂∫"] },
            { q: "2. ‡∂¥‡∑ä‚Äç‡∂ª‡∂∑‡∑è‡∑É‡∂Ç‡∑É‡∑ä‡∂Ω‡∑ö‡∑Ç‡∂´‡∂∫‡∑ö ‡∂Ö‡∂≠‡∑î‡∂ª‡∑î ‡∂µ‡∂Ω‡∂∫?", o: ["CO2", "H2O", "O2", "C6H12O6"], c: 2, h: "‡∂¥‡∑í‡∂ß‡∑Ä‡∂± ‡∑Ä‡∑è‡∂∫‡∑î‡∑Ä.", exps: ["‡∂Ö‡∂∏‡∑î‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‚Äç‡∂∫‡∂∫‡∂ö‡∑í", "‡∂Ö‡∂∏‡∑î‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∑ä‚Äç‡∂∫‡∂∫‡∂ö‡∑í", "‡∂î‡∂ö‡∑ä‡∑É‡∑í‡∂¢‡∂±‡∑ä ‡∂Ö‡∂≠‡∑î‡∂ª‡∑î ‡∂µ‡∂Ω‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ô‡∑É ‡∂¥‡∑í‡∂ß‡∑Ä‡∑ö.", "‡∂¥‡∑ä‚Äç‡∂ª‡∂∞‡∑è‡∂± ‡∂µ‡∂Ω‡∂∫‡∂∫‡∑í"] },
            { q: "3. ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω‡∂≠‡∂∏ ‡∂ú‡∑ä‚Äç‡∂ª‡∂±‡∑ä‡∂Æ‡∑í‡∂∫?", o: ["‡∂Ö‡∂ú‡∑ä‡∂±‡∑ä‚Äç‡∂∫‡∑è‡∑Å‡∂∫", "‡∂Ö‡∂ö‡∑ä‡∂∏‡∑è‡∑Ä", "‡∂≠‡∂∫‡∑í‡∂ª‡∑ú‡∂∫‡∑í‡∂©‡∑ä", "‡∂¥‡∑í‡∂ß‡∑í‡∂∫‡∑î‡∂ß‡∂ª‡∑í"], c: 1, h: "Liver", exps: ["‡∂∏‡∂∞‡∑ä‚Äç‡∂∫‡∂∏", "‡∂Ö‡∂ö‡∑ä‡∂∏‡∑è‡∑Ä ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω‡∂≠‡∂∏ ‡∑Ä‡∑ö.", "‡∂∂‡∑ô‡∂Ω‡∑ä‡∂Ω‡∑ö ‡∂á‡∂≠", "‡∂â‡∂≠‡∑è ‡∂ö‡∑î‡∂©‡∑è‡∂∫"] },
            { q: "4. ‡∂ª‡∑î‡∂∞‡∑í‡∂ª‡∂∫ ‡∂ö‡∑ê‡∂ß‡∑í ‡∂ú‡∑ê‡∑É‡∑ì‡∂∏‡∂ß ‡∂ã‡∂Ø‡∑Ä‡∑î ‡∑Ä‡∂±‡∑ä‡∂±‡∑ö?", o: ["RBC", "WBC", "‡∂¥‡∂ß‡∑ä‡∂ß‡∑í‡∂ö‡∑è", "‡∂¥‡∑ä‡∂Ω‡∑è‡∑É‡∑ä‡∂∏‡∑è"], c: 2, h: "Platelets", exps: ["‡∂î‡∂ö‡∑ä‡∑É‡∑í‡∂¢‡∂±‡∑ä", "‡∂Ü‡∂ª‡∂ö‡∑ä‡∑Ç‡∑è‡∑Ä", "‡∂ª‡∑î‡∂∞‡∑í‡∂ª ‡∂¥‡∂ß‡∑ä‡∂ß‡∑í‡∂ö‡∑è ‡∂ª‡∑î‡∂∞‡∑í‡∂ª‡∂∫ ‡∂ö‡∑ê‡∂ß‡∑í ‡∂ú‡∑É‡∑ä‡∑Ä‡∂∫‡∑í.", "‡∂Ø‡∑ä‚Äç‡∂ª‡∑Ä‡∂∫"] },
            { q: "5. ‡∂¢‡∑è‡∂± ‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä‡∑ö ‡∂¥‡∑í‡∂∫‡∑è?", o: ["‡∂©‡∑è‡∑Ä‡∑í‡∂±‡∑ä", "‡∂∏‡∑ô‡∂±‡∑ä‡∂©‡∂Ω‡∑ä", "‡∂¥‡∑è‡∑É‡∑ä‡∂†‡∂ª‡∑ä", "‡∂Ω‡∑ê‡∂∏‡∑è‡∂ª‡∑ä‡∂ö‡∑ä"], c: 1, h: "‡∂∏‡∑ë ‡∑Å‡∑è‡∂ö ‡∂¥‡∂ª‡∑ì‡∂ö‡∑ä‡∑Ç‡∂´.", exps: ["‡∂¥‡∂ª‡∑í‡∂´‡∑è‡∂∏‡∂∫", "‡∂ú‡∑ä‚Äç‡∂ª‡∑ô‡∂ú‡∂ª‡∑ä ‡∂∏‡∑ô‡∂±‡∑ä‡∂©‡∂Ω‡∑ä ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫.", "‡∂ö‡∑ä‡∑Ç‡∑î‡∂Ø‡∑ä‚Äç‡∂ª ‡∂¢‡∑ì‡∑Ä‡∑ì", "‡∂¥‡∂ª‡∑í‡∂´‡∑è‡∂∏‡∂∫"] }
        ],
        "combinedmaths": [
            { q: "1. x¬≤ ‡∑Ñ‡∑í ‡∑Ä‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä‡∂¥‡∂±‡∑ä‡∂±‡∂∫?", o: ["x", "2x", "x¬≥", "1"], c: 1, h: "nx^(n-1)", exps: ["‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "2x ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫.", "‡∂Ö‡∂±‡∑î‡∂ö‡∂Ω‡∂±‡∂∫", "x ‡∑Ñ‡∑í ‡∑Ä‡∑ä‚Äç‡∂∫‡∑î‡∂≠‡∑ä‡∂¥‡∂±‡∑ä‡∂±‡∂∫‡∂∫‡∑í"] },
            { q: "2. sin¬≤x + cos¬≤x = ?", o: ["0", "1", "-1", "2"], c: 1, h: "‡∂∏‡∑ñ‡∂Ω‡∑í‡∂ö ‡∑É‡∂ª‡∑ä‡∑Ä‡∑É‡∑è‡∂∏‡∑ä‚Äç‡∂∫‡∂∫.", exps: ["‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "‡∑É‡∑ê‡∂∏‡∑Ä‡∑í‡∂ß‡∂∏ 1 ‡∑Ä‡∑ö.", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫"] },
            { q: "3. log 100 ‡∂¥‡∑è‡∂Ø‡∂∫ 10 ‡∂±‡∂∏‡∑ä?", o: ["1", "2", "10", "100"], c: 1, h: "10^2 = 100", exps: ["log 10", "2 ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫.", "‡∂¥‡∑è‡∂Ø‡∂∫", "‡∂Ö‡∂ú‡∂∫"] },
            { q: "4. ‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∂∫‡∂ö ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂µ‡∂Ω‡∂∫?", o: ["2œÄr", "œÄr¬≤", "œÄd", "4/3œÄr¬≥"], c: 1, h: "r ‡∂Ö‡∂ª‡∂∫‡∂∫‡∑í.", exps: ["‡∂¥‡∂ª‡∑í‡∂∞‡∑í‡∂∫", "œÄr¬≤ ‡∑Ä‡∂ª‡∑ä‡∂ú‡∂µ‡∂Ω‡∂∫‡∂∫‡∑í.", "‡∂¥‡∂ª‡∑í‡∂∞‡∑í‡∂∫", "‡∂ú‡∑ù‡∂Ω ‡∂¥‡∂ª‡∑í‡∂∏‡∑è‡∑Ä"] },
            { q: "5. ‡∂Ö‡∂±‡∑î‡∂ö‡∑ä‚Äç‡∂ª‡∂∏‡∂´‡∂∫ (m) ‡∂∫‡∂±‡∑î?", o: ["x/y", "y/x", "dy/dx", "x+y"], c: 2, h: "Gradient", exps: ["‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "dy/dx ‡∂∫‡∂±‡∑î ‡∂Ö‡∂±‡∑î‡∂ö‡∑ä‚Äç‡∂ª‡∂∏‡∂´‡∂∫‡∂∫‡∑í.", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫"] }
        ],
        "econ": [
            { q: "1. ‡∂∏‡∑ñ‡∂Ω‡∑í‡∂ö ‡∂Ü‡∂ª‡∑ä‡∂Æ‡∑í‡∂ö ‡∂ú‡∑ê‡∂ß‡∂Ω‡∑î‡∑Ä?", o: ["‡∂∏‡∑î‡∂Ø‡∂Ω‡∑ä", "‡∑Ñ‡∑í‡∂ü‡∂ö‡∂∏", "‡∑Ä‡∑ô‡∑Ö‡∂≥‡∑è‡∂∏", "‡∂∂‡∂Ø‡∑î"], c: 1, h: "Scarcity", exps: ["‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂µ‡∂Ω‡∂∫‡∂ö‡∑í", "‡∑É‡∂∏‡∑ä‡∂¥‡∂≠‡∑ä ‡∑Ñ‡∑í‡∂ü‡∂ö‡∂∏ ‡∂∏‡∑ñ‡∂Ω‡∑í‡∂ö ‡∂ú‡∑ê‡∂ß‡∂Ω‡∑î‡∑Ä‡∂∫‡∑í.", "‡∂ö‡∑ä‚Äç‡∂ª‡∑í‡∂∫‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫‡∂ö‡∑í", "‡∂ª‡∂¢‡∂∫‡∑ö ‡∂Ü‡∂Ø‡∑è‡∂∫‡∂∏‡∂ö‡∑í"] },
            { q: "2. ‡∂∏‡∑í‡∂Ω ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∂â‡∂Ω‡∑ä‡∂Ω‡∑î‡∂∏‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∂∏‡∑è‡∂´‡∂∫?", o: ["‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∑ö", "‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ö", "‡∑É‡∑ä‡∂Æ‡∑è‡∑Ä‡∂ª‡∂∫‡∑í", "‡∑Å‡∑î‡∂±‡∑ä‚Äç‡∂∫ ‡∑Ä‡∑ö"], c: 1, h: "‡∂¥‡∑ä‚Äç‡∂ª‡∂≠‡∑í‡∂Ω‡∑ù‡∂∏ ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞‡∂∫.", exps: ["‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫", "‡∂∏‡∑í‡∂Ω ‡∑Ä‡∑ê‡∂©‡∑í ‡∑Ä‡∂± ‡∑Ä‡∑í‡∂ß ‡∂â‡∂Ω‡∑ä‡∂Ω‡∑î‡∂∏ ‡∂Ö‡∂©‡∑î ‡∑Ä‡∑ö.", "‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∑Ä‡∑ö", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫"] },
            { q: "3. ‡∂±‡∑í‡∑Ç‡∑ä‡∂¥‡∑è‡∂Ø‡∂± ‡∑É‡∑è‡∂∞‡∂ö ‡∂ú‡∂´‡∂±?", o: ["2", "3", "4", "5"], c: 2, h: "‡∂∑‡∑ñ‡∂∏‡∑í‡∂∫, ‡∑Å‡∑ä‚Äç‡∂ª‡∂∏‡∂∫...", exps: ["‡∂∏‡∂Ø‡∑í‡∂∫", "‡∂∏‡∂Ø‡∑í‡∂∫", "‡∑É‡∑è‡∂∞‡∂ö 4 ‡∂ö‡∑í (‡∂∑‡∑ñ‡∂∏‡∑í‡∂∫, ‡∑Å‡∑ä‚Äç‡∂ª‡∂∏‡∂∫, ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂ú‡∑ä‡∂∞‡∂±‡∂∫, ‡∑Ä‡∑ä‚Äç‡∂∫‡∑Ä‡∑É‡∑è‡∂∫‡∂ö‡∂≠‡∑ä‡∑Ä‡∂∫).", "‡∑Ä‡∑ê‡∂©‡∑í‡∂∫‡∑í"] },
            { q: "4. GDP ‡∂∫‡∂±‡∑î?", o: ["‡∂∏‡∑î‡∑Ö‡∑î ‡∂Ö‡∂¥‡∂±‡∂∫‡∂±", "‡∂∏‡∑î‡∑Ö‡∑î ‡∂±‡∑í‡∑Ç‡∑ä‡∂¥‡∑è‡∂Ø‡∑í‡∂≠‡∂∫", "‡∂∏‡∑î‡∑Ö‡∑î ‡∂∂‡∂Ø‡∑î", "‡∂∏‡∑î‡∑Ö‡∑î ‡∂´‡∂∫"], c: 1, h: "Gross Domestic Product", exps: ["‡∂Ö‡∂Ç‡∑Å‡∂∫‡∂ö‡∑í", "‡∂∏‡∑î‡∑Ö‡∑î ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂∑‡∑è‡∂´‡∑ä‡∂© ‡∑Ñ‡∑è ‡∑É‡∑ö‡∑Ä‡∑è ‡∂Ö‡∂ú‡∂∫‡∂∫‡∑í.", "‡∂Ü‡∂Ø‡∑è‡∂∫‡∂∏‡∂ö‡∑í", "‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫"] },
            { q: "5. ‡∂í‡∂ö‡∑è‡∂∞‡∑í‡∂ö‡∑è‡∂ª‡∑ì ‡∑Ä‡∑ô‡∑Ö‡∂≥‡∂¥‡∑ú‡∑Ö ‡∂Ω‡∂ö‡∑ä‡∑Ç‡∂´‡∂∫?", o: ["‡∂∂‡∑ú‡∑Ñ‡∑ù ‡∑Ä‡∑í‡∂ö‡∑î‡∂´‡∑î‡∂∏‡∑ä‡∂ö‡∂ª‡∑î‡∑Ä‡∂±‡∑ä", "‡∂≠‡∂±‡∑í ‡∑Ä‡∑í‡∂ö‡∑î‡∂´‡∑î‡∂∏‡∑ä‡∂ö‡∂ª‡∑î", "‡∂≠‡∂ª‡∂ü‡∂∫ ‡∑Ä‡∑ê‡∂©‡∑í‡∑Ä‡∑ì‡∂∏", "‡∂∏‡∑í‡∂Ω ‡∂¥‡∑è‡∂Ω‡∂±‡∂∫‡∂ö‡∑ä ‡∂±‡∑ê‡∂≠"], c: 1, h: "Monopoly", exps: ["‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂≠‡∂ª‡∂ü‡∂ö‡∑è‡∂ª‡∑ì", "‡∑É‡∑í‡∂ß‡∑í‡∂±‡∑ä‡∂±‡∑ö ‡∂ë‡∂ö‡∑ä ‡∑Ä‡∑í‡∂ö‡∑î‡∂´‡∑î‡∂∏‡∑ä‡∂ö‡∂ª‡∑î‡∑Ä‡∑ô‡∂ö‡∑î ‡∂¥‡∂∏‡∂´‡∑í.", "‡∂≠‡∂ª‡∂ü‡∂∫‡∂ö‡∑ä ‡∂±‡∑ê‡∂≠", "‡∂∏‡∑í‡∂Ω ‡∂¥‡∑è‡∂Ω‡∂±‡∂∫ ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö"] }
        ]
    };

    let currentIdx = 0, rScore = 0, wScore = 0, activeList = [], selectedSub = "";

    function goToStep(s) {
        document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
        document.getElementById(s === 'quizStep' || s === 'resultStep' ? s : 'step' + s).classList.add('active');
    }

    function setSubject(sub) {
        selectedSub = sub;
        goToStep(2);
    }

    function showPlanner() {
        let days = document.getElementById('daysInput').value;
        if(!days || days < 1) return alert("‡∂Ø‡∑í‡∂± ‡∂ú‡∂´‡∂± ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
        let daily = Math.ceil(15330 / days);
        document.getElementById('plannerResult').innerHTML = `‡∑Ä‡∑í‡∂∑‡∑è‡∂ú‡∂∫ ‡∂¢‡∂∫ ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß ‡∂±‡∂∏‡∑ä ‡∂î‡∂∂<br><span style="font-size: 1.8em; color:var(--success); font-weight:bold;">‡∂Ø‡∑í‡∂±‡∂ö‡∂ß MCQ ${daily} ‡∂∂‡∑ê‡∂ú‡∑í‡∂±‡∑ä</span><br>‡∂ö‡∑Ö ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.`;
        goToStep(3);
    }

    function startQuiz() {
        activeList = questionsDB[selectedSub];
        currentIdx = 0; rScore = 0; wScore = 0;
        updateScoreBoard();
        loadQuestion();
        goToStep('quizStep');
    }

    function loadQuestion() {
        let q = activeList[currentIdx];
        document.getElementById('qDisplay').innerText = q.q;
        document.getElementById('qInfo').innerText = `${currentIdx + 1} / ${activeList.length}`;
        document.getElementById('pFill').style.width = `${((currentIdx + 1)/activeList.length)*100}%`;
        document.getElementById('hintBox').innerHTML = `üí° ${q.h}`;
        document.getElementById('hintBox').style.display = 'none';
        document.getElementById('doneBtn').style.display = 'none';

        let container = document.getElementById('optionsDisplay');
        container.innerHTML = "";
        q.o.forEach((opt, i) => {
            let div = document.createElement('div');
            div.className = 'mcq-opt';
            div.id = 'opt-' + i;
            div.innerHTML = `<b>${String.fromCharCode(65+i)}.</b> ${opt} <div id="fb-${i}"></div>`;
            div.onclick = () => handleCheck(i);
            container.appendChild(div);
        });
    }

    function handleCheck(selected) {
        let q = activeList[currentIdx];
        document.querySelectorAll('.mcq-opt').forEach(el => el.style.pointerEvents = 'none');
        
        q.o.forEach((_, i) => {
            let el = document.getElementById('opt-' + i);
            let fb = document.getElementById('fb-' + i);
            if(i === q.c) {
                el.classList.add('correct-final');
                fb.innerHTML = `<div class="exp-text" style="color:var(--success)">‚úì ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: ${q.exps[i]}</div>`;
            } else if(i === selected) {
                el.classList.add('wrong-final');
                fb.innerHTML = `<div class="exp-text" style="color:var(--error)">‚úï ‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í: ${q.exps[i]}</div>`;
            } else {
                fb.innerHTML = `<div class="exp-text">${q.exps[i]}</div>`;
            }
        });

        if(selected === q.c) rScore++; else wScore++;
        updateScoreBoard();
        document.getElementById('doneBtn').style.display = 'block';
    }

    function updateScoreBoard() {
        document.getElementById('rScore').innerText = rScore;
        document.getElementById('wScore').innerText = wScore;
    }

    function toggleHint() {
        let h = document.getElementById('hintBox');
        h.style.display = h.style.display === 'block' ? 'none' : 'block';
    }

    function nextQuestion() {
        currentIdx++;
        if(currentIdx < activeList.length) loadQuestion();
        else showFinalResult();
    }

    function showFinalResult() {
        goToStep('resultStep');
        let percentage = Math.round((rScore / activeList.length) * 100);
        document.getElementById('scoreCircle').innerText = percentage + "%";
        
        let grade = percentage >= 75 ? "‡∑Ä‡∑í‡∑Å‡∑í‡∑Ç‡∑ä‡∂ß‡∂∫‡∑í! (A)" : percentage >= 50 ? "‡∑É‡∑è‡∂∏‡∑è‡∂±‡∑ä‚Äç‡∂∫‡∂∫‡∑í (C)" : "‡∂≠‡∑Ä ‡∂ã‡∂≠‡∑ä‡∑É‡∑è‡∑Ñ ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (S/W)";
        document.getElementById('gradeText').innerText = grade;
        document.getElementById('feedbackMessage').innerText = "‡∂î‡∂∂ ‡∂∏‡∑ô‡∂∏ ‡∑Ä‡∑í‡∑Ç‡∂∫ ‡∂ö‡∑ú‡∂ß‡∑É‡∑í‡∂±‡∑ä ‡∂Ω‡∂∂‡∑è‡∂ú‡∂≠‡∑ä ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∂≠‡∑ä‡∑Ä‡∂∫ ‡∂Ö‡∂±‡∑è‡∂ú‡∂≠‡∂∫‡∂ß ‡∂∏‡∑Ñ‡∂≠‡∑ä ‡∂ª‡∑î‡∂ö‡∑î‡∂Ω‡∂ö‡∑ä ‡∑Ä‡∂±‡∑î ‡∂á‡∂≠.";

        saveProgress(percentage);
        displayHistory();
    }

    function saveProgress(score) {
        let history = JSON.parse(localStorage.getItem('alSmartHistory')) || [];
        history.push({ date: new Date().toLocaleDateString(), score: score, sub: selectedSub });
        if(history.length > 5) history.shift();
        localStorage.setItem('alSmartHistory', JSON.stringify(history));
    }

    function displayHistory() {
        let history = JSON.parse(localStorage.getItem('alSmartHistory')) || [];
        document.getElementById('historyList').innerHTML = history.reverse().map(h => 
            `<div><span>${h.date} (${h.sub})</span><span style="color:var(--success)">${h.score}%</span></div>`
        ).join('');
    }
</script>

</body>
</html>
